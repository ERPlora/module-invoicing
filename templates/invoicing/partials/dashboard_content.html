{% load djicons i18n djicons djicons %}

<div class="p-4">
    <!-- Monthly Stats -->
    <div class="grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
        <div class="card">
            <div class="card-body p-6">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center">
                        {% icon "document-text-outline" css_class="text-2xl text-primary" %}
                    </div>
                    <div>
                        <div class="text-sm text-base-content/60">{% trans "This Month" %}</div>
                        <div class="text-2xl font-bold">{{ monthly_count }}</div>
                        <div class="text-xs text-base-content/60">{% trans "invoices" %}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body p-6">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-success/10 rounded-xl flex items-center justify-center">
                        {% icon "cash-outline" css_class="text-2xl text-success" %}
                    </div>
                    <div>
                        <div class="text-sm text-base-content/60">{% trans "Monthly Total" %}</div>
                        <div class="text-2xl font-bold">{{ monthly_total|floatformat:2 }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body p-6">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-success/10 rounded-xl flex items-center justify-center">
                        {% icon "checkmark-circle-outline" css_class="text-2xl text-success" %}
                    </div>
                    <div>
                        <div class="text-sm text-base-content/60">{% trans "Paid" %}</div>
                        <div class="text-2xl font-bold text-success">{{ monthly_paid|floatformat:2 }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Breakdown -->
    <div class="grid grid-cols-3 gap-4 mb-6">
        <div class="card">
            <div class="card-body flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-base-200/50 flex items-center justify-center">
                    {% icon "create-outline" css_class="text-xl text-base-content/60" %}
                </div>
                <div>
                    <div class="text-2xl font-bold">{{ draft_count }}</div>
                    <div class="text-xs text-base-content/60">{% trans "Drafts" %}</div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center">
                    {% icon "send-outline" css_class="text-xl text-primary" %}
                </div>
                <div>
                    <div class="text-2xl font-bold">{{ issued_count }}</div>
                    <div class="text-xs text-base-content/60">{% trans "Issued" %}</div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-success/10 flex items-center justify-center">
                    {% icon "checkmark-done-outline" css_class="text-xl text-success" %}
                </div>
                <div>
                    <div class="text-2xl font-bold">{{ paid_count }}</div>
                    <div class="text-xs text-base-content/60">{% trans "Paid" %}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="card mb-4">
        <div class="card-header">
            <h3 class="card-title">{% trans "Quick Actions" %}</h3>
        </div>
        <div class="card-body p-0">
            <div class="list">
                <a hx-get="{% url 'invoicing:invoice_create' %}"
                   hx-target="#main-content-area"
                   hx-push-url="true"
                   class="list-item list-item-clickable">
                    <div class="list-item-start">
                        {% icon "add-circle-outline" css_class="text-xl text-primary" %}
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Create New Invoice" %}</div>
                        <div class="list-item-note">{% trans "Start a new draft invoice" %}</div>
                    </div>
                    <div class="list-item-end">
                        <span class="list-item-chevron"></span>
                    </div>
                </a>
                <a hx-get="{% url 'invoicing:invoices' %}"
                   hx-target="#main-content-area"
                   hx-push-url="true"
                   class="list-item list-item-clickable">
                    <div class="list-item-start">
                        {% icon "list-outline" css_class="text-xl text-success" %}
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "View All Invoices" %}</div>
                        <div class="list-item-note">{% trans "Browse and manage your invoices" %}</div>
                    </div>
                    <div class="list-item-end">
                        <span class="list-item-chevron"></span>
                    </div>
                </a>
                <a hx-get="{% url 'invoicing:series' %}"
                   hx-target="#main-content-area"
                   hx-push-url="true"
                   class="list-item list-item-clickable">
                    <div class="list-item-start">
                        {% icon "layers-outline" css_class="text-xl text-warning" %}
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Manage Series" %}</div>
                        <div class="list-item-note">{% trans "Configure invoice numbering series" %}</div>
                    </div>
                    <div class="list-item-end">
                        <span class="list-item-chevron"></span>
                    </div>
                </a>
            </div>
        </div>
    </div>

    {% if recent_invoices %}
    <div class="card mb-4">
        <div class="card-header">
            <h3 class="card-title">{% trans "Recent Invoices" %}</h3>
        </div>
        <div class="card-body p-0">
            <div class="list">
                {% for invoice in recent_invoices %}
                <a hx-get="{% url 'invoicing:invoice_detail' invoice.id %}"
                   hx-target="#main-content-area"
                   hx-push-url="true"
                   class="list-item list-item-clickable">
                    <div class="list-item-start">
                        <div class="w-10 h-10 rounded-lg flex items-center justify-center {% if invoice.status == 'paid' %}bg-success/10{% elif invoice.status == 'issued' %}bg-primary/10{% elif invoice.status == 'cancelled' %}bg-error/10{% else %}bg-base-200/50{% endif %}">
                            {% if invoice.status == 'paid' %}
                                {% icon "checkmark-circle-outline" css_class="text-xl text-success" %}
                            {% elif invoice.status == 'issued' %}
                                {% icon "send-outline" css_class="text-xl text-primary" %}
                            {% elif invoice.status == 'cancelled' %}
                                {% icon "close-circle-outline" css_class="text-xl text-error" %}
                            {% else %}
                                {% icon "create-outline" css_class="text-xl text-base-content/60" %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-label">
                            {{ invoice.number|default:"Draft" }} <span class="text-base-content/60 font-normal">&middot; {{ invoice.customer_name }}</span>
                        </div>
                        <div class="list-item-note">{{ invoice.issue_date|date:"M d, Y" }}</div>
                    </div>
                    <div class="list-item-end text-right">
                        <div class="font-semibold">{{ invoice.total|floatformat:2 }}</div>
                        <span class="badge badge-sm {% if invoice.status == 'paid' %}color-success{% elif invoice.status == 'issued' %}color-primary{% elif invoice.status == 'cancelled' %}color-error{% endif %}">
                            {{ invoice.get_status_display }}
                        </span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <div class="p-4 rounded-xl bg-primary/5 flex items-start gap-3">
        {% icon "information-circle-outline" css_class="text-xl text-primary mt-0.5 shrink-0" %}
        <p class="text-sm text-base-content/60">
            {% trans "Create and manage invoices for your sales. Configure invoice series in Settings to customize invoice numbering. Invoices start as drafts and must be issued to receive an invoice number." %}
        </p>
    </div>
</div>
